# 妊活サポートアプリ

生理周期・排卵予測・基礎体温と体調・検査薬・タイミングなどを記録するWebアプリです。ブラウザだけで動作し、データは端末内（ローカルストレージ）に保存されます。  
仕様書（Must: 記録・カレンダー・バックアップ、オンボーディング、低温期・高温期の設定、免責表示）に沿って実装しています。

## 機能

- **オンボーディング** … 初回のみ、平均周期・最終月経開始日・通知の案内
- **ホーム** … 今日の状態、次回生理予定、妊娠しやすい時期の目安、今日の基礎体温クイック記録
- **記録** … ワンタップで今日の記録（基礎体温・体調・排卵検査薬・タイミング・おりもの）
- **カレンダー** … 生理予定・妊娠しやすい時期・排卵予定日を色分け。記録がある日はドット表示
- **基礎体温** … 日付ごとに体温を記録し、一覧とグラフで確認
- **AIによる今日のアドバイス** … 記録をもとにその日の励ましメッセージを生成（医療助言なし）
- **AIチャット** … 妊活についての相談（医療助言は行いません）
- **設定** … 周期・生理期間・**高温期（黄体期）の日数**・直近の生理開始日、**AI設定（APIキー）**、データ出力・バックアップ、免責表示

## 使い方

1. **設定** タブで「平均生理周期」「平均生理期間」「直近の生理開始日」を入力して保存する
2. **ホーム** で今日の状態と妊娠しやすい時期の目安を確認する
3. **カレンダー** で月ごとの予定を確認する
4. **基礎体温** で毎朝の体温を記録する（ホームの「今日の記録」からも記録可能）

## 起動方法

### いちばん簡単な方法（おすすめ）

1. パソコンで **エクスプローラー** を開く
2. このアプリのフォルダ **nikatsu-app** を開く  
   （場所: `C:\Users\miu_miki\nikatsu-app`）
3. **「起動.bat」** というファイルを **ダブルクリック** する
4. 自動でブラウザが開き、アプリが表示されます

---

### スマホで使う（同じ Wi‑Fi で）

1. PC に **Node.js** を入れている場合  
   **「スマホで見る.bat」** をダブルクリックする
2. 黒い窓に表示される **URL**（例: `http://192.168.1.10:5000`）をメモする
3. スマホを **PC と同じ Wi‑Fi** に接続する
4. スマホのブラウザでその URL を開く

※Node.js がない場合は [Node.js の公式サイト](https://nodejs.org/) からインストールしてください。  
※データはスマホのブラウザには残りません。記録は「そのスマホで開いたときのブラウザ」か「PC のブラウザ」のどちらか一方に保存されます。

**PCで設定して、スマホで使う場合**

1. PC でアプリを開き、**設定**で周期・直近の生理開始日などを入力して保存する  
2. **設定** → **データのバックアップ** で **「バックアップをダウンロード」** を押し、JSON ファイルを保存する  
3. そのファイルをスマホに送る（メールで自分に送る、LINE で保存、Google ドライブに上げるなど）  
4. スマホでアプリを開き（同じ Wi‑Fi の URL または GitHub Pages の URL）、**設定** → **「バックアップを取り込む」** で、送ったファイルを選ぶ  
5. 以降はスマホで記録を続ければOK。データはスマホのブラウザに保存されます  

**URLで共有する（ファイルを送らずに移す）**

1. PC でアプリを開き、**設定** → **データのバックアップ** で **「共有用URLを発行」** を押す  
2. 表示された URL がクリップボードにコピーされる（表示エリアからもコピー可能）  
3. その URL を自分宛てに送る（メール・LINE・メモなど）  
4. スマホでその URL を開く → 同じアプリのページが開き、**データが自動で取り込まれます**  
※ 写真（通院結果・排卵検査薬の写真）は URL には含まれません。写真も移したい場合は「バックアップをダウンロード」でファイルを取り込んでください。  
※ URL の長さの制限で、記録がとても多い場合は「データが多すぎます」と出ることがあります。そのときはバックアップファイルで取り込んでください。

---

### 別の方法: index.html から開く

1. エクスプローラーで **nikatsu-app** フォルダを開く
2. **index.html** をダブルクリックする  
   → いつも使っているブラウザ（Chrome・Edge など）で開きます

---

### コマンドが分かる人向け（任意）

フォルダ内で次のコマンドを実行すると、ブラウザで http://localhost:3000 のように開けます。

```bash
cd C:\Users\miu_miki\nikatsu-app
npx serve .
```

## AI機能の使い方

1. **設定** → **AI設定** で「API提供元」（OpenAI または Google Gemini）を選び、**APIキー**を入力して保存する。
2. **OpenAI** の場合は [OpenAI API](https://platform.openai.com/api-keys) でキーを取得（有料）。
3. **Google Gemini** の場合は [Google AI Studio](https://aistudio.google.com/) でキーを取得（無料枠あり）。モデル名は `gemini-1.5-flash` など。
4. **ホーム**の「アドバイスを生成」で、その日の記録に基づいた短いメッセージを表示。
5. **AIチャット**タブで、妊活について気軽に質問・相談（医療助言は行いません）。

APIキーは端末内（ローカルストレージ）にのみ保存され、第三者には送信されません。API呼び出し時のみ、選択した提供元のサーバーに送信されます。

## 注意

- 排卵日・妊娠しやすい時期は**目安**です。避妊や妊娠の判断は医師の指導に従ってください。
- AIの応答は医療助言ではなく、心の支えや一般的な情報の提供を目的としています。体調に不安がある場合は受診してください。
- データはこの端末のブラウザ内にのみ保存されます。別の端末やブラウザでは共有されません。

## ファイル構成

- `index.html` … 画面とナビゲーション
- `styles.css` … デザイン
- `app.js` … 周期計算・カレンダー・基礎体温の処理とローカルストレージの読み書き
